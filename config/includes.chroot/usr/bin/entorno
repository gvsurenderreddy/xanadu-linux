#!/bin/bash
#elaborado por sinfallas
if [[ $USER != root ]]; then
echo -e "\e[00;31mERROR: DEBES SER ROOT\e[00m"
exit 1
fi
echo $BASHPID > /run/entorno.pid
nombre=entorno.txt
echo -e "## CPU ##""\n" > /tmp/$nombre
lscpu >> /tmp/$nombre
echo -e "\n""## HARDWARE ##""\n" >> /tmp/$nombre
hwinfo --short >> /tmp/$nombre
echo -e "\n""## PCI ##""\n" >> /tmp/$nombre
lspci >> /tmp/$nombre
echo -e "\n""## USB ##""\n" >> /tmp/$nombre
lsusb >> /tmp/$nombre
echo -e "\n""## MEMORIA ##""\n" >> /tmp/$nombre
free -h >> /tmp/$nombre
echo -e "\n""## DISCO ##""\n" >> /tmp/$nombre
df -h >> /tmp/$nombre
echo -e "\n""## LAPTOP ##""\n" >> /tmp/$nombre
echo $(laptop-detect -v 2>&1) >> /tmp/$nombre
echo -e "\n""## INSTALACION ##""\n" >> /tmp/$nombre
if ! [[ -d /lib/live/mount/rootfs ]] ; then
	echo "Xanadu esta ejecutandose desde una instalacion." >> /tmp/$nombre
else
	echo "Xanadu esta ejecutandose en modo live." >> /tmp/$nombre
fi
echo -e "\n""## VIRTUALIZACION ##""\n" >> /tmp/$nombre
systemd-detect-virt >> /tmp/$nombre
echo -e "\n""## TIEMPO DE ARRANQUE ##""\n" >> /tmp/$nombre
systemd-analyze >> /tmp/$nombre
echo -e "\n""## OTROS S.O. ##""\n" >> /tmp/$nombre
os-prober >> /tmp/$nombre
clear
echo -e "\n""El reporte se ha generado en /tmp/$nombre"
rm -f /run/entorno.pid
exit 0
